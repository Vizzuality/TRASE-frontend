@import '../../settings';

.c-map-legend {
  padding: 8px;

  border: 1px solid $pinkish-grey;
  background-color: $white-two;

  cursor: pointer;
  z-index: 401;

}

.c-map-legend-choro {
  margin-bottom: 10px;

  .bucket {
    &.ch-red-0 { background-color: $ch-red-0; };
    &.ch-red-1 { background-color: $ch-red-1; };
    &.ch-red-2 { background-color: $ch-red-2; };
    &.ch-red-3 { background-color: $ch-red-3; };
    &.ch-red-4 { background-color: $ch-red-4; };
    &.ch-blue-0 { background-color: $ch-blue-0; };
    &.ch-blue-1 { background-color: $ch-blue-1; };
    &.ch-blue-2 { background-color: $ch-blue-2; };
    &.ch-blue-3 { background-color: $ch-blue-3; };
    &.ch-blue-4 { background-color: $ch-blue-4; };
    &.ch-bi-0-2 { background-color: $ch-bi-0-2; };
    &.ch-bi-1-2 { background-color: $ch-bi-1-2; };
    &.ch-bi-2-2 { background-color: $ch-bi-2-2; };
    &.ch-bi-0-1 { background-color: $ch-bi-0-1; };
    &.ch-bi-1-1 { background-color: $ch-bi-1-1; };
    &.ch-bi-2-1 { background-color: $ch-bi-2-1; };
    &.ch-bi-0-0 { background-color: $ch-bi-0-0; };
    &.ch-bi-1-0 { background-color: $ch-bi-1-0; };
    &.ch-bi-2-0 { background-color: $ch-bi-2-0; };
  }

  > .bucket-container {
    display: flex;
    position: relative;
    flex-direction: column;
    flex-wrap: wrap;
    align-items: flex-end;

    > .bucket-block {
      display: flex;
      position: relative;
      align-items: center;

      .bucket-legend {
        display: flex;
        flex-wrap: wrap;
        width: 85px;
        height: 18px; // 16px content + 2px border

        border: 1px solid $pinkish-grey-two;

      }

      .bucket-legend > .bucket-item > .bucket {
        padding-bottom: 100%;
      }
    }

    > .bucket-footer {
      margin: 16px 0 0;

      > .icon-legend-arrow {
        position: absolute;
        top: 0;
        left: 50%;
        height: 48px;
        transform: translate(-50%, 0) rotate(90deg);
      }
    }

    .layer-name {
      max-width: 75px;
      color: rgba($charcoal-grey, .5);
      font-family: $font-family-1;
      font-size: $font-size-small;
      letter-spacing: -.5px;
      line-height: .8;
      text-transform: uppercase;
    }

    &.-horizontal {

      > .bucket-block {
        .bucket-legend > .bucket-item {
          flex-basis: calc(100% / 5);
        }

        > .layer-name,
        > .icon-legend-arrow {
          display: none;
        }
      }

      > .bucket-footer {
        width: 100%;

        > .layer-name {
          max-width: 85px;
        }
      }
    }

    &.-vertical {

      > .bucket-block {

        > .layer-name {
          margin:  0 16px 0 0;
        }

        > .icon-legend-arrow {
          position: absolute;
          right: calc(26px - 6px);
        }

        > .bucket-legend {
          flex-direction: column-reverse;
          flex-wrap: nowrap;
          width: 18px;
          height: 100%;
        }
      }

      > .bucket-footer {
        display: none;
      }
    }

    &.-bidimensional {

      > .bucket-block {
        .bucket-legend {
          width: 48px;
          height: 48px;

          > .bucket-item {
            flex-basis: calc(100% / 3);
          }
        }

        > .layer-name {
          text-align: right;
        }
      }

      > .bucket-footer {
        position: relative;
        min-height: 16px;

        > .layer-name {
          max-width: 56px;
        }

        > .icon-legend-arrow {
          top: auto;
          right: 13px;
          bottom: 3px;
          left: auto;
        }
      }
    }
  }
}

.c-map-legend-context {
  color: rgba($charcoal-grey, .5);
  font-family: $font-family-1;
  font-size: $font-size-small;
  letter-spacing: -.5px;
  text-transform: uppercase;

  .cartodb-legend {
    padding: 10px 0;
  }

  .cartodb-legend:not(:only-child):not(:last-child) {
    border-bottom: 1px solid $pinkish-grey;
  }

  .bullet, .quartile {
    display: inline-block;
    width: 10px;
    height: 10px;
  }

  .bullet {
    margin-right: 5px;
    border-radius: 99px;
  }

  .bullet-icon {
    width: 15px;
    height: 15px;
    border-radius: 0;
    background-size: contain;
  }

  .max, .min, .graph {
    display: inline-block;
    margin-right: 4px;
  }

  ul {
    position: relative;
  }
}
